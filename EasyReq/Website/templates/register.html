{% extends 'base.html' %}
{% load static %}

{% block title %}Register | EasyReq{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

<div class="wrapper">
    <h1>Registration</h1>

    <!-- Profile Picture Upload Styled Circle -->
    <div class="profile-pic-container">
        <label for="profile_pic" class="profile-pic-label">
            <img src="{% static 'images/profile.png' %}" alt="Profile Picture" class="profile-pic" id="preview-pic">
            <i class='bx bx-plus-circle profile-edit-icon'></i>
        </label>
    </div>

    <form action="{% url 'register' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <input type="file" name="profile_pic" id="profile_pic" accept="image/*" style="display: none;" onchange="previewProfilePicture(event)">

        <div class="input-box">
            <input type="text" name="username" placeholder="Username" required>
        </div>

        <div class="input-box">
            <input type="password" name="password1" id="password1" placeholder="Password" required>
            <i class='bx bx-lock-alt' id="toggle-password1"></i>
        </div>

        <div class="password-requirements">
            <p>The password must include:</p>
            <ul>
                <li id="length">At least 8 characters</li>
                <li id="uppercase">Capital letter (A-Z)</li>
                <li id="lowercase">Small letter (a-z)</li>
                <li id="number">Number (0-9)</li>
                <li id="special">Special character (!@#$%^&*)</li>
            </ul>
        </div>

        <div class="input-box">
            <input type="password" name="password2" id="password2" placeholder="Password confirmation" required>
            <i class='bx bx-lock-alt' id="toggle-password2"></i>
        </div>
        <span id="password-match-error" class="error-message" style="display: none;">The passwords do not match</span>

        <div class="input-box">
            <input type="text" name="first_name" placeholder="First Name" required>
            <i class='bx bx-id-card'></i>
        </div>

        <div class="input-box">
            <input type="text" name="last_name" placeholder="Last Name" required>
            <i class='bx bx-id-card'></i>
        </div>

        <select name="role" class="select-box" required>
            <option value="" disabled selected>Role</option>
            <option value="0">Student</option>
            <option value="1">Lecturer</option>
            <option value="2">Staff</option>
            <option value="3">Deanery</option>
        </select>

        <div class="input-box">
            <input type="email" name="email" placeholder="Email" required>
            <i class='bx bx-envelope'></i>
        </div>

        <select name="department" class="select-box" required>
            <option value="" disabled selected>Department</option>
            <option value="1">Software Engineering</option>
        </select>

        <button type="submit" class="btn">Register</button>
    </form>

    <div class="bottom-links">
        <a href="{% url 'login' %}">Return to login page</a>
    </div>
</div>

<!-- Preview JS -->
<script>
    function previewProfilePicture(event) {
        const reader = new FileReader();
        reader.onload = function () {
            const output = document.getElementById('preview-pic');
            output.src = reader.result;
        };
        reader.readAsDataURL(event.target.files[0]);
    }
</script>

<script src="{% static 'js/password_validation.js' %}"></script>
{% endblock %}
